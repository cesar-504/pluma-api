BEGIN TRANSACTION;
CREATE TABLE `Users` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255) NOT NULL, `lastName` VARCHAR(255) NOT NULL, `email` VARCHAR(255) NOT NULL UNIQUE, `credit` DECIMAL NOT NULL DEFAULT 0, `password` VARCHAR(255) NOT NULL, `active` TINYINT(1) NOT NULL DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `ParkingId` INTEGER REFERENCES `Parkings` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `AdministratorId` INTEGER REFERENCES `Administrators` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, UNIQUE (email));
CREATE TABLE `Products` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255) NOT NULL, `description` TEXT, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO `Products` VALUES (1,'producto1','descripcion del producto1','2017-03-06 02:34:35.518 +00:00','2017-03-06 02:34:35.518 +00:00');
CREATE TABLE `Parkings` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255) NOT NULL UNIQUE, `description` TEXT, `capacity` INTEGER, `requireID` TINYINT(1) NOT NULL DEFAULT 0, `open` TINYINT(1) NOT NULL DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, UNIQUE (name));
CREATE TABLE `IORegistries` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `type` VARCHAR(255) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `ParkingId` INTEGER REFERENCES `Parkings` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `UserId` INTEGER REFERENCES `Users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE);
CREATE TABLE `CostParkings` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `hoursIni` DECIMAL NOT NULL, `hoursEnd` DECIMAL NOT NULL, `priceForHour` DECIMAL, `priceForRange` DECIMAL, `usePriceForRange` TINYINT(1) DEFAULT 0, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `ParkingId` INTEGER REFERENCES `Parkings` (`id`) ON DELETE SET NULL ON UPDATE CASCADE);
CREATE TABLE `Administrators` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255) NOT NULL, `lastName` VARCHAR(255) NOT NULL, `email` VARCHAR(255) NOT NULL UNIQUE, `credit` DECIMAL NOT NULL DEFAULT 0, `password` VARCHAR(255) NOT NULL, `active` TINYINT(1) NOT NULL DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, UNIQUE (email));
CREATE TABLE `AdministratorParking` (`createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `ParkingId` INTEGER NOT NULL REFERENCES `Parkings` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, `AdministratorId` INTEGER NOT NULL REFERENCES `Administrators` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, PRIMARY KEY (`ParkingId`, `AdministratorId`));
COMMIT;
